var instantClick,InstantClick=instantClick=function(e,t,n){var i,r,o,a,s,d,c,l=n.indexOf(" CriOS/")>-1,f=3e4,u={},h={},m={},p=!1,v=!1,y=!1,g=!1,b={},T=!1,w=!1,C=[],E={fetch:[],receive:[],wait:[],change:[],restore:[]};function L(e){var t=e.indexOf("#");return t<0?e:e.substr(0,t)}function x(e){for(;e&&"A"!=e.nodeName;)e=e.parentNode;return e}function k(e){var n=t.protocol+"//"+t.host;return!(e.target||e.hasAttribute("download")||0!=e.href.indexOf(n+"/")||e.href.indexOf("#")>-1&&L(e.href)==i||function(e){do{if(!e.hasAttribute)break;if(e.hasAttribute("data-instant"))return!1;if(e.hasAttribute("data-no-instant"))return!0}while(e=e.parentNode);return!1}(e))}function A(e,t,n,i){for(var r=!1,o=0;o<E[e].length;o++)if("receive"==e){var a=E[e][o](t,n,i);a&&("body"in a&&(n=a.body),"title"in a&&(i=a.title),r=a)}else E[e][o](t,n,i);return r}function M(n,r,o,a,s){if(e.documentElement.replaceChild(r,e.body),o){t.href!==o&&history.pushState(null,null,o);var d=o.indexOf("#"),c=d>-1&&e.getElementById(o.substr(d+1)),f=0;if(c)for(;c.offsetParent;)f+=c.offsetTop,c=c.offsetParent;scrollTo(0,f),i=L(o)}else scrollTo(0,a);l&&e.title==n?e.title=n+String.fromCharCode(160):e.title=n,R(),s?A("restore"):A("change",!1)}function H(){T=!1,w=!1}function O(e){if(!(a>+new Date-500)){var t=x(e.target);t&&k(t)&&j(t.href)}}function D(e){if(!(a>+new Date-500)){var t=x(e.target);t&&k(t)&&(t.addEventListener("mouseout",B),c?(r=t.href,o=setTimeout(j,c)):j(t.href))}}function Y(e){a=+new Date;var t=x(e.target);t&&k(t)&&(d?t.removeEventListener("mousedown",O):t.removeEventListener("mouseover",D),j(t.href))}function S(e){var t=x(e.target);t&&k(t)&&(e.which>1||e.metaKey||e.ctrlKey||(e.preventDefault(),z(t.href)))}function B(){if(o)return clearTimeout(o),void(o=!1);T&&!w&&(s.abort(),H())}function I(t){if(!(t.readyState<4)&&0!=t.status){if(b.ready=+new Date-b.start,t.isFromCache||(h[p]=function(e){var t={},n=e.getResponseHeader("Content-Type");return t.isFromCache=!0,t.readyState=e.readyState,t.status=e.status,t.responseText=e.responseText,t.getResponseHeader=function(e){return n},t}(t),u[p]=(new Date).getTime()),t.getResponseHeader("Content-Type").match(/\/(x|ht|xht)ml/)){var n=e.implementation.createHTMLDocument("");n.documentElement.innerHTML=t.responseText.replace(/<noscript[\s\S]+?<\/noscript>/gi,""),v=n.title,g=n.body;var i=A("receive",p,g,v);i&&("body"in i&&(g=i.body),"title"in i&&(v=i.title));var r=L(p);m[r]={body:g,title:v,scrollY:r in m?m[r].scrollY:0};for(var o,a,s=n.head.children,d=0,c=0;c<s.length;c++)if((o=s[c]).hasAttribute("data-instant-track")){a=o.getAttribute("href")||o.getAttribute("src")||o.innerHTML;for(var l=0;l<C.length;l++)C[l]==a&&d++}d!=C.length&&(y=!0)}else y=!0;w&&(w=!1,z(p))}}function N(){var e=L(t.href);e!=i&&(e in m?(m[i].scrollY=pageYOffset,i=e,M(m[e].title,m[e].body,!1,m[e].scrollY,!0)):t.href=t.href)}function R(t){if(e.body.addEventListener("touchstart",Y,!0),d?e.body.addEventListener("mousedown",O,!0):e.body.addEventListener("mouseover",D,!0),e.body.addEventListener("click",S,!0),!t)for(var n,i,r,o,a=e.body.getElementsByTagName("script"),s=0,c=a.length;s<c;s++)(n=a[s]).hasAttribute("data-no-instant")||(i=e.createElement("script"),n.src&&(i.src=n.src),n.innerHTML&&(i.innerHTML=n.innerHTML),r=n.parentNode,o=n.nextSibling,r.removeChild(n),r.insertBefore(i,o))}function j(e){!d&&"display"in b&&+new Date-(b.start+b.display)<100||(o&&(clearTimeout(o),o=!1),e||(e=r),T&&(e==p||w)||(T=!0,w=!1,p=e,g=!1,y=!1,b={start:+new Date},A("fetch"),h[p]&&u[p]+f>(new Date).getTime()?I(h[p]):(s.open("GET",e),s.send())))}function z(e){if("display"in b||(b.display=+new Date-b.start),o||!T)return o&&p&&p!=e?void(t.href=e):(j(e),A("wait"),void(w=!0));if(w)t.href=e;else if(y)t.href=p;else{if(!g)return A("wait"),void(w=!0);m[i].scrollY=pageYOffset,H(),M(v,g,p)}}var W="pushState"in history&&(!n.match("Android")||n.match("Chrome/"))&&"file:"!=t.protocol;return{supported:W,init:function(n){var r;if("object"!=typeof n?r=n:(r=n.preloadingMode||0,void 0!==n.preloadCacheTimeLimit&&(f=n.preloadCacheTimeLimit)),!i)if(W){"mousedown"==r?d=!0:"number"==typeof r&&(c=r),i=L(t.href),m[i]={body:e.body,title:e.title,scrollY:pageYOffset};for(var o,a,l=e.head.children,u=0;u<l.length;u++)(o=l[u]).hasAttribute("data-instant-track")&&(a=o.getAttribute("href")||o.getAttribute("src")||o.innerHTML,C.push(a));(s=new XMLHttpRequest).addEventListener("readystatechange",(function(){I(s)})),R(!0),A("change",!0),addEventListener("popstate",N)}else A("change",!0)},on:function(e,t){E[e].push(t)}}}(document,location,navigator.userAgent);"object"==typeof module&&"object"==typeof module.exports&&(module.exports=InstantClick),function(){var e,t,n,i,r,o="createTouch"in document;function a(t,n){i=t,document.getElementById(e.id)&&document.body.removeChild(e),e.style.opacity="1",document.getElementById(e.id)&&document.body.removeChild(e),c(),n&&setTimeout(s,0),clearTimeout(r),r=setTimeout(d,500)}function s(){i=10,c()}function d(){(i+=1+2*Math.random())>=98?i=98:r=setTimeout(d,500),c()}function c(){t.style[n]="translate("+i+"%)",document.getElementById(e.id)||document.body.appendChild(e)}function l(){if(document.getElementById(e.id))return clearTimeout(r),i=100,c(),void(e.style.opacity="0");a(100==i?0:i),setTimeout(l,0)}function f(){e.style.left=pageXOffset+"px",e.style.width=innerWidth+"px",e.style.top=pageYOffset+"px";var t="orientation"in window&&90==Math.abs(orientation),i=innerWidth/screen[t?"height":"width"]*2;e.style[n]="scaleY("+i+")"}instantClick.on("change",(function(i){i&&instantClick.supported?function(){(e=document.createElement("div")).id="instantclick",(t=document.createElement("div")).id="instantclick-bar",t.className="instantclick-bar",e.appendChild(t);var i=["Webkit","Moz","O"];if(!((n="transform")in t.style))for(var r=0;r<3;r++)i[r]+"Transform"in t.style&&(n=i[r]+"Transform");var a="transition";if(!(a in t.style))for(r=0;r<3;r++)i[r]+"Transition"in t.style&&(a="-"+i[r].toLowerCase()+"-"+a);var s=document.createElement("style");s.innerHTML="#instantclick{position:"+(o?"absolute":"fixed")+";top:0;left:0;width:100%;pointer-events:none;z-index:2147483647;"+a+":opacity .2s .1s}.instantclick-bar{background:#27ae60;width:100%;margin-left:-100%;height:2px;"+a+":all .2s}",document.head.appendChild(s),o&&(f(),addEventListener("resize",f),addEventListener("scroll",f))}():i||l()})),instantClick.on("wait",a)}();
